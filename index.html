<!doctype html>
<html lang="id">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FullCalendar + Bootstrap 5 (Responsive)</title>
  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <!-- FullCalendar core (bundle berisi plugin umum: dayGrid, timeGrid, list, interaction) -->
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.js"></script>
  <!-- Plugin tema Bootstrap 5 -->
  <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/bootstrap5@6.1.15/index.global.min.js"></script>
  <!-- Lokal semua bahasa -->
  <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/core@6.1.15/locales-all.global.min.js"></script>
  <!-- Font Awesome (agar icon prev/next muncul) -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet">

  <style>
    body {
      background: #f8fafc;
    }

    .fc {
      --fc-page-bg-color: #ffffff;
    }

    /* Legenda kecil di atas kalender */
    .legend {
      display: flex;
      gap: .75rem;
      align-items: center;
      flex-wrap: wrap;
    }

    .legend .item {
      display: flex;
      align-items: center;
      gap: .4rem;
    }

    .legend .swatch {
      width: 14px;
      height: 14px;
      border-radius: 3px;
      display: inline-block;
    }

    .swatch-blocked {
      background: rgba(220, 53, 69, .25);
      border: 1px solid rgba(220, 53, 69, .55);
    }
  </style>
</head>

<body>
  <div class="container py-4">
    <div class="row justify-content-center">
      <div class="col-12 col-lg-10 col-xl-8">
        <div class="d-flex flex-column flex-md-row align-items-md-end justify-content-between mb-3 gap-2">
          <div>
            <h1 class="h3 mb-1">Kalender Tugas</h1>
            <p id="event-info" class="text-secondary mb-0"></p>
            <p class="text-white mb-0 bg-primary p-2 rounded m-1">15 September 2025 - 20 September 2025 : Rapat
              Kecil dengan 2 Narasumber.</p>
            <p class="text-white mb-0 bg-primary p-2 rounded m-1">24 September 2025 - 27 September 2025 : fullboard,
              rencana
              pembahasan "Publikasi dan Halfday"</p>
            <p class="text-white mb-0 bg-primary p-2 rounded m-1">17 Oktober 2025 : Halfday Publikasi SATU DATA HAM</p>

          </div>
          <div class="legend">
            <!-- <span class="item"><span class="swatch swatch-blocked"></span><small>Hari terblok (Tugas ini)</small></span> -->
          </div>
        </div>

        <div class="card shadow-sm border-0">
          <div class="card-body p-2 p-sm-3">
            <div id="calendar"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    (function () {
      function initialView() {
        return window.innerWidth < 576 ? 'listWeek' : 'dayGridMonth';
      }

      const calendarEl = document.getElementById('calendar');
      const calendar = new FullCalendar.Calendar(calendarEl, {
        themeSystem: 'bootstrap5',
        locale: 'id',
        initialView: initialView(),
        height: 'auto',
        aspectRatio: 1.45,
        firstDay: 1,
        initialDate: '2025-08-29',

        headerToolbar: {
          left: 'prev,next today',
          center: 'title',
          right: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek'
        },

        events: [
          {
            title: 'Rapat Kecil dengan 2 Narasumber',
            start: '2025-09-15',
            end: '2025-09-20',
            allDay: true
          },
          {
            title: 'fullboard, rencana pembahasan "Publikasi dan Halfday"',
            start: '2025-09-24',
            end: '2025-09-27',
            allDay: true
          },
          {
            title: 'Halfday Publikasi SATU DATA HAM"',
            start: '2025-10-18',
            end: '2025-10-18',
            allDay: true
          }
        ]
      });

      calendar.render();

      // Ambil event utama
      const tugasEvent = calendar.getEvents().find(ev => ev.title === 'Rapat');

      if (tugasEvent) {
        const start = tugasEvent.start;
        // end di FullCalendar sifatnya eksklusif -> kurangi 1 hari
        const end = new Date(tugasEvent.end);
        end.setDate(end.getDate() - 1);

        // Format tanggal (locale Indonesia)
        const opt = { day: '2-digit', month: 'long', year: 'numeric' };
        const startText = start.toLocaleDateString('id-ID', opt);
        const endText = end.toLocaleDateString('id-ID', opt);

        // Masukkan ke dalam paragraf

      }

      // Ganti icon tombol prev/next dengan FontAwesome
      document.querySelector('.fc-prev-button').innerHTML = '<i class="fa-solid fa-chevron-left"></i>';
      document.querySelector('.fc-next-button').innerHTML = '<i class="fa-solid fa-chevron-right"></i>';
      document.querySelector('.fc-today-button').classList.add('btn-sm');
    })();
  </script>


</body>

</html>